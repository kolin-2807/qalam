<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qalam - 2D —Ä–µ—Ç—Ä–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <link rel="stylesheet" href="../assets/style/header_css.css">
</head>
<body>
<div class="header">
  <div class="burger-menu" style="margin-right: 14px">
    <div class="burger-icon" onclick="toggleBurgerMenu()">‚ò∞</div>
    <div class="burger-content" id="burger-content">
      <a href="../pages/quest_levels.php"><img src="../assets/images/navigationimages/SvitokQALAM.png" alt="Courses">Courses</a>
      <a href="Kubok.php"><img src="../assets/images/navigationimages/KubokQALAM.png" alt="League">League</a>
      <a href="user_page.php"><img src="../assets/images/navigationimages/homeQALAM.png" alt="Home">Home</a>
      <a href="#"><img src="../assets/images/navigationimages/MozgQALAM.png" alt="Clubs">Q-hub</a>
      <a href="Plans.php"><img src="../assets/images/navigationimages/CherepQALAM.png" alt="Subs">Plans</a>
      <!-- üîî “ö–æ“£—ã—Ä–∞—É –∏–∫–æ–Ω–∫–∞—Å—ã -->
      <div class="notification-icon">
        <img src="../assets/images/notificationqalam.png" alt="Notifications">
      </div>
    </div>
  </div>

  <div class="logo" style="margin-right: 1032px;">
    Qalam 
    <img src="../assets/images/navigationimages/LOGOTYPE-QALAM.png" alt="Logo">
  </div>

  <div class="profile">
    <?php if ($email): ?>
      <a href="profile.php">
        <img src='../assets/images/profileqalamp.png' style='width:18px; height:18px;'> <?= $name ?>
      </a>
      <img src='../assets/images/xpqalam.png' style='width:18px; height:18px;'> <?= $xp ?>
      <img src='../assets/images/coinqalam.png' style='width:18px; height:18px;'> <?= $coins ?>
      <a href="../auth/logout.php" class="logout-btn"> –®—ã“ì—É </a>
    <?php else: ?>
      <a href="../login_register.php"> –¢—ñ—Ä–∫–µ–ª—É </a>
    <?php endif; ?>
  </div>
</div>

<!-- –û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
<div class="container">
    <div class="py-5 text-center">
        <h2>–ß–∞—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞</h2>
        <p class="lead">–£–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ –∏–º—è –∏ –Ω–∞—á–∏–Ω–∞–π—Ç–µ –ø–µ—Ä–µ–ø–∏—Å–∫—É</p>
    </div>
    <div class="row">
        <div class="col-6">
            <!-- –§–æ—Ä–º–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∏–º–µ–Ω–∏ -->
            <h3>–§–æ—Ä–º–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</h3>
            <form id="messForm">
                <label for="name">–ò–º—è</label>
                <input type="text" name="name" id="name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" class="form-control">
                <br>
                <label for="message">–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                <textarea name="message" id="message" class="form-control" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ"></textarea>
                <br>
                <input type="submit" value="–û—Ç–ø—Ä–∞–≤–∏—Ç—å" class="btn btn-danger">
            </form>
        </div>
        <div class="col-6">
            <h3>–°–æ–æ–±—â–µ–Ω–∏—è</h3>
            <!-- –í—ã–≤–æ–¥ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
            <div id="all_mess"></div>
        </div>
    </div>
</div>
<!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º jQuery, –∞ —Ç–∞–∫–∂–µ Socket.io -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="/socket.io/socket.io.js"></script>
<script>
    // –£ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–π —Å—Ç–∏–ª—å –¥–ª—è –±–ª–æ–∫–∞ —Å —Å–æ–æ–±—â–µ–Ω—è–º–∏,
    // –ø–æ—ç—Ç–æ–º—É –≤ —ç—Ç–æ–º –∫—É—Å–æ—á–∫–µ –∫–æ–¥–∞ –º—ã –ø–æ–ª—É—á–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞
    var min = 1;
    var max = 6;
    var random = Math.floor(Math.random() * (max - min)) + min;

    // –£—Å—Ç–∞–Ω–∞–ª–∏–≤–∞–µ–º –∫–ª–∞—Å—Å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ —á–∏—Å–ª–∞
    // –≠—Ç–∏ –∫–ª–∞—Å—Å—ã –≤–∑—è—Ç—ã –∏–∑ Bootstrap —Å—Ç–∏–ª–µ–π
    var alertClass;
    switch (random) {
        case 1:
            alertClass = 'secondary';
            break;
        case 2:
            alertClass = 'danger';
            break;
        case 3:
            alertClass = 'success';
            break;
        case 4:
            alertClass = 'warning';
            break;
        case 5:
            alertClass = 'info';
            break;
        case 6:
            alertClass = 'light';
            break;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –Ω–∞ —Å–∞–π—Ç–µ
    $(function() {
        // –í–∫–ª—é—á–∞–µ–º socket.io –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –≤—Å–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
        var socket = io.connect();
        // –î–µ–ª–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞:
        var $form = $("#messForm"); // –§–æ—Ä–º—É —Å–æ–æ–±—â–µ–Ω–∏–π
        var $name = $("#name"); // –ü–æ–ª–µ —Å –∏–º–µ–Ω–µ–º
        var $textarea = $("#message"); // –¢–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ
        var $all_messages = $("#all_mess"); // –ë–ª–æ–∫ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤ —Ñ–æ—Ä–º–µ —Å–æ–æ–±—â–µ–Ω–∏–π
        $form.submit(function(event) {
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã
            event.preventDefault();
            // –í —Å–æ–∫–µ—Ç –æ—Ç—Å—ã–ª–∞–µ–º –Ω–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ 'send mess',
            // –≤ —Å–æ–±—ã—Ç–∏–µ –ø–µ—Ä–µ–¥–∞–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –¥–∞–Ω–Ω—ã–µ
            socket.emit('send mess', {mess: $textarea.val(), name: $name.val(), className: alertClass});
            // –û—á–∏—â–∞–µ–º –ø–æ–ª–µ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
            $textarea.val('');
        });

        // –ó–¥–µ—Å—å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ 'add mess', 
        // –∫–æ—Ç–æ—Ä–æ–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –∏–∑ —Å–æ–∫–µ—Ç–∞ –≤ —Å–ª—É—á–∞–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
        socket.on('add mess', function(data) {
            // –í—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –±–ª–æ–∫ —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
            // –£ –±–ª–æ–∫–∞ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –±—É–¥–µ—Ç —Ç–æ—Ç –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–æ—Ç–≤–µ—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—Ç–æ –µ–≥–æ –æ—Ç–ø—Ä–∞–≤–∏–ª
            $all_messages.append("<div class='alert alert-" + data.className + "'><b>" + data.name + "</b>: " + data.mess + "</div>");
        });

    });
</script>

<script>
function toggleBurgerMenu() {
  const content = document.getElementById('burger-content');
  content.style.display = content.style.display === 'flex' ? 'none' : 'flex';
}
</script>
</body>
</html>